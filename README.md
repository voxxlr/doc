# Voxxlr Doc SDK

Voxxlr is a cloud platform to develop and host web applications for geospatial content. It consists of a processing pipeline for various input formats and a web interface to visualize datasets in a browser and develop custom Apps. The platform is divided into several git repositories:


| Repo        | Description |
| :---        |    :----   |
| **doc**      | **The doc SDK renders a dataset in an iframe and provides a messaging API**       |
| app      | The app SDK provides high level components to manage multiple datasets and develop Apps.   |
| cloud    | The cloud SDK provides software to process geospatial datasets on linux or windows  |

A complete version of Voxxlr running the main branches of the repos listed above can be found at https://www.voxxlr.com. Follow the links below for a few sample Apps developed with Voxxlr. Parts of the platform such as data processing and storage can be hosted on private infrastructure and seamlessly integrated with the hosted version at Voxxlr. 

| Link        | Description |
| :---        |    :----   |
| https://app.voxxlr.com/1624016067425   | BIM Viewer  |
| https://app.voxxlr.com/1620825035265   | Inspector App  |
| https://app.voxxlr.com/1623155297253   | Volumetric App  |



## Installation
After cloning this repo run 

```javascript
node server.js 
```
And point the browser to either of 

```
http://127.0.0.1:3000/cloud
http://127.0.0.1:3000/model
http://127.0.0.1:3000/map
http://127.0.0.1:3000/panorama
```
The datasets displayed are from the sandbox account at voxxlr, but the code producing the visualization is loaded from your local directory. 


## Building

The repository contains three index.html files
```
doc/1d/index.html
doc/2d/index.html
doc/3d/index.html
```

which contain the viewers for panoramas, maps and 3d point clouds / CAD files. Running the integrated build system via

```java
java -jar build.jar
```

generates three versions of each html file

| File        | Description |
| :---        |    :----   |
| index.**min**.html    | All javascript code is inlined and optimized using the google closure compiler. References to the original .js files are lost. |
| index.**hub**.html    | Loads the javascript files from the main branch off this github repository. This index file will work standalone without a reference to a local copies of the .js file |
| index.**dev**.html    | Loads the javascript files from 127.0.0.1:3000 for a local development using the server.js file mentioned above |


## Hosting

The _doc_ SDK can be hosted on any domain simply by serving the appropriate index.html created during the build process. Before serving the file, the _{{{content}}}_ mustache tag has to be replaced with either _null_ or a json object describing which document to load intially. This json is created by the Voxxlr processing pipeline and typically stored server side. When running the _server.js_ the json is retrieved from the hosted version at Voxxlr via doc.voxxlr.com REST endpoint. 

Note that the json object provided to the viewer contains a _data url_ to the output generated by the processing as well as _refresh url_ should the data _url expire_. 

For a documentation of the messaging API and a interactive fiddles visit https://www.voxxlr.com/api.html

## License
The Voxxlr App SDK is licensed under the Affero GPL V3 license.

